import serpapi
from utililty import search_google, text_getter
import os
from colorama import Fore

def get_trends(geo:str="IT"):
    params = {
    "api_key": os.getenv("SERP_API_KEY"),
    "engine": "google_trends_trending_now",
    "frequency": "realtime",
    "geo": geo,
    "hl": "en",
    # "cat": "t"
    }

    search = serpapi.GoogleSearch(params)
    search = search.get_dict()
    return search


def ask_trend(state, geo:str="US"):
    print(Fore.LIGHTBLUE_EX + '[+] Asking trend')
    # trends = get_trends(geo)
    # try:
    #     searches = trends["daily_searches"][0]["searches"]
    #     for idx, s in enumerate(searches):
    #         print(f"{idx}. Query: {s['query']} (Traffic: {s['traffic']})")
    #         for art in s["articles"]:
    #             print(f"\tArt title: {art['title']}")
    #             print(f"\tArt snippet: {art['snippet']}")
    #             print(f"\tArt url: {art['link']}")
    #             print(f"\tArt source: {art['source']}")
    #             print(f"\t--------------------------------")

    #     selected_index = int(input("Please select a query by typing the number corresponding to the index: "))
    #     chosen_trend = searches[selected_index]
    #     print(f"\nYou selected query: {chosen_trend['query']} (Traffic: {chosen_trend['traffic']})")
    # except KeyError:
    #     searches = trends["realtime_searches"]
    #     for idx, s in enumerate(searches[:15]):
    #         query = ', '.join(s['queries'])
    #         print(f"{idx}. Query: {query}")
    #         for art in s["articles"]:
    #             print(f"\tArt title: {art['title']}")
    #             print(f"\tArt snippet: {art['snippet']}")
    #             print(f"\tArt url: {art['link']}")
    #             print(f"\tArt source: {art['source']}")
    #             print(f"\t--------------------------------")
                
    #     selected_index = int(input("Please select a query by typing the number corresponding to the index: "))
    #     chosen_trend = searches[selected_index]
    #     chosen_trend_query =  ", ".join(chosen_trend['queries'][:4])
    #     print(f"\nYou selected query: {chosen_trend_query}")


    # state["chosen_trend"]["name"] = chosen_trend_query
    # return state
    # state["chosen_trend"]["name"] = 'Flash flood, National Weather Service, Flash flood warning, Virginia'
    return state


def get_news_for_trend(state):
    trend = state["chosen_trend"]["name"]
    print(Fore.LIGHTBLUE_EX + f'[+] Getting news for trend {trend}')
    # news_results = search_google(trend, search_type="nws")["news_results"]
    news_results = search_google(trend, search_type="nws")
    if not news_results:
        raise ValueError(f"No news returned for trend {trend}")
    # news_results = [{'position': 1, 'link': 'https://www.newsleader.com/story/news/2024/07/23/two-inches-of-rain-per-hour-flood-watch-by-national-weather-service/74514832007/', 'title': 'Two inches of rain per hour possible: Flood watch issued by National Weather Service', 'source': 'The News Leader | Staunton, VA', 'date': '2 giorni fa', 'snippet': 'Flash flooding caused by excessive rainfall is possible.', 'thumbnail': 'https://serpapi.com/searches/66a3a2bb36e6a956f4056a87/images/e1eb238a98f663786370cd78e2ce28f80b53ec6f6b298fd0acba12df18280aaa.jpeg'}, {'position': 2, 'link': 'https://cvillerightnow.com/news/208802-flood-watch-issued-for-charlottesville-albemarle-and-surrounding-areas-from-5-pm-to-11-pm-tonight/', 'title': 'Flood Watch Issued for Charlottesville, Albemarle, and Surrounding Areas from 5 PM to 11 PM Tonight (Tuesday)', 'source': 'Cville Right Now', 'date': '2 giorni fa', 'snippet': 'CHARLOTTESVILLE, VA (CVILLE RIGHT NOW) – The National Weather Service (NWS) has issued a Flood Watch for Charlottesville, Albemarle County,...', 'thumbnail': 'https://serpapi.com/searches/66a3a2bb36e6a956f4056a87/images/e1eb238a98f66378b18da563c65dc3b597aa0aea0af4f886455ffa5607cdb0dc.jpeg'}, {'position': 3, 'link': 'https://www.wric.com/weather/severe-weather/flash-flood-warnings-flood-watches-issued-in-central-virginia-due-to-heavy-rain/', 'title': 'Flash flood warnings, flood watches issued in central Virginia due to heavy rain', 'source': 'WRIC ABC 8News', 'date': '2 giorni fa', 'snippet': 'Multiple flash flood warnings and flood watches have been issued throughout central Virginia during heavy downpours Tuesday evening.', 'thumbnail': 'https://serpapi.com/searches/66a3a2bb36e6a956f4056a87/images/e1eb238a98f663787e9dd59f73dcd30490b9d50dbff31a8aa3eb00785acb2f98.jpeg'}, {'position': 4, 'link': 'https://www.progress-index.com/story/weather/severe/2024/07/20/flooding-petersburg-flood-watch-saturday-night/74484054007/', 'title': 'National Weather Service issues flood watch for Tri-Cities until 10 p.m. Saturday', 'source': 'The Progress Index', 'date': '5 giorni fa', 'snippet': "Saturday's hard rain pummeling the Tri-City area has led to a flash-flood watch from the National Weather Service until 10 p.m.,...", 'thumbnail': 'https://serpapi.com/searches/66a3a2bb36e6a956f4056a87/images/e1eb238a98f66378c8b57ce51003745ea31e49c8e6a7195cb91528ceb1449a6d.jpeg'}, {'position': 5, 'link': 'https://www.wtrf.com/weather/flash-flood-warning-for-tyler-county/', 'title': 'Flash Flood Warning for Tyler County', 'source': 'WTRF', 'date': '1 giorno fa', 'snippet': 'The National Weather Service out of Charleston, West Virginia has issued a Flash Flood Warning for Tyler County.', 'thumbnail': 'https://serpapi.com/searches/66a3a2bb36e6a956f4056a87/images/e1eb238a98f66378b4470f70c1cb35f1f48a12058922025ed25b06385b67ee55.jpeg'}, {'position': 6, 'link': 'https://www.13newsnow.com/article/news/local/mycity/norfolk/weather-alert-day-for-possible-flash-flooding/291-0eb7533b-c627-4dfc-ba26-b6b49c286e39', 'title': 'Weather Alert Day for possible flash flooding', 'source': '13newsnow.com', 'date': '4 giorni fa', 'snippet': 'NORFOLK, Va. —. 5:50 p.m. — Flash Flood Warning for parts of Hampton Roads. The National Weather Service in Wakefield has issued a Flash...', 'thumbnail': 'https://serpapi.com/searches/66a3a2bb36e6a956f4056a87/images/e1eb238a98f66378af3b467db910b8bfb2b577ff96b5453ff780dc05d8464e84.jpeg'}, {'position': 7, 'link': 'https://patch.com/georgia/atlanta/flash-flood-warning-issued-some-ga-cities', 'title': 'Life-Threatening Flash Flooding Possible In GA; Warnings Issued', 'source': 'Patch', 'date': '2 giorni fa', 'snippet': '"Life-threatening flash flooding" may occur in some parts of Georgia on Tuesday, according to two warnings.', 'thumbnail': 'https://serpapi.com/searches/66a3a2bb36e6a956f4056a87/images/e1eb238a98f66378d34a44b67d48d61edad9958bfdafc2f10c9f2581088c4103.jpeg'}, {'position': 8, 'link': 'https://rocktownnow.com/news/218812-flash-flood-warning-issued-for-harrisonburg-and-rockingham-county/', 'title': 'Flash flood warning issued for Harrisonburg and Rockingham County', 'source': 'Rocktown Now', 'date': '6 mag 2024', 'snippet': 'According to an alert from NWS in Sterling, Va., thunderstorms are producing heavy rainfall of 1-2 inches per hour, with 1-1.5 inches...', 'thumbnail': 'https://serpapi.com/searches/66a3a2bb36e6a956f4056a87/images/e1eb238a98f663786170813617d0d8c657a48bc41852406cc084703eb4546673.jpeg'}, {'position': 9, 'link': 'https://wvmetronews.com/2024/05/15/nws-issues-flash-flood-warnings-advisories-for-parts-of-southeastern-west-virginia/', 'title': 'NWS issues flash flood warnings, advisories for parts of southeastern West Virginia', 'source': 'WV MetroNews', 'date': '15 mag 2024', 'snippet': "The Summers County Sheriff's Office also said that the county is experiencing some flash flooding. There are a few flooded streets as reported...", 'thumbnail': 'https://serpapi.com/searches/66a3a2bb36e6a956f4056a87/images/e1eb238a98f663785dee2a10fd1982407fd5d0a4295b04b63ff38e7385c8d58e.png'}, {'position': 10, 'link': 'https://wchstv.com/news/local/flood-watch-issued-for-counties-along-the-ohio-river', 'title': 'NWS issues flood warnings for central West Virginia, northeast Kentucky', 'source': 'WCHS', 'date': '11 apr 2024', 'snippet': 'UPDATED - 6 p.m. 4/11/24A flash flood warning has been issued for portions of West Virginia.The National Weather Service has issued a...', 'thumbnail': 'https://serpapi.com/searches/66a3a2bb36e6a956f4056a87/images/e1eb238a98f663787977599cb328667977aa8bdb512010c27ecfdf8f69718fca.jpeg'}]
    processed_news_results = [text_getter(n["link"]) for n in news_results]
    processed_news_results = [list(pn)[0] for pn in processed_news_results]
    processed_news_results = [pn for pn in processed_news_results if isinstance(pn, dict)]
    processed_news_results = [pn for pn in processed_news_results if pn["text"] != "Unable to reach website."]

    # processed_news_results = [{'author': 'Monique Calello', 'base': 'https://www.newsleader.com', 'provider': None, 'published_date': '2024-07-22T22:00:00+00:00', 'text': 'Two inches of rain per hour possible: Flood watch issued by National Weather Service\n\nNational Weather Service has issued a time sensitive severe alert. A flood watch is in effect Tuesday from 5 p.m. to 11 p.m. this evening.\n\nWHAT: Flash flooding caused by excessive rainfall is possible.\n\nWHERE: Portions of central, northern, northwest, and western Virginia, including the following areas, in central Virginia, Albemarle, Central Virginia Blue Ridge, Greene, Orange and Spotsylvania. In northern Virginia, Culpeper, Southern Fauquier and Stafford. In northwest Virginia, Madison, Northern Virginia Blue Ridge, Page and Rappahannock. In western Virginia, Augusta and Rockingham.\n\nWHEN: From 5 p.m. to 11 p.m. Tuesday\n\nIMPACTS: Excessive runoff may result in flooding of rivers, creeks, streams, and other low-lying and flood-prone locations. Flooding may occur in poor drainage and urban areas.\n\nADDITIONAL DETAILS: Thunderstorms this afternoon and evening could have intense rain rates exceeding two inches per hour. If locally repetitive or prolonged thunderstorms develop, flash flooding could occur in flood prone urban and suburban areas.\n\nPRECAUTIONARY/PREPAREDNESS ACTIONS: You should monitor later forecasts and be prepared to take action should Flash Flood Warnings be issued. Please visit www.weather.gov/safety/flood for flood safety and preparedness information.\n\nMore: One dead in Waynesboro shooting, suspect in custody', 'title': 'Two inches of rain per hour possible: Flood watch issued by National Weather Service', 'top_image': 'https://www.gannett-cdn.com/authoring/authoring-images/2024/07/23/PSTA/74514950007-screen-shot-20240723-at-14206-pm.png?auto=webp&crop=607,343,x0,y59&format=pjpg&width=1200', 'url': 'https://www.newsleader.com/story/news/2024/07/23/two-inches-of-rain-per-hour-flood-watch-by-national-weather-service/74514832007/', 'keywords': ["..."], 'summary': 'Two inches of rain per hour possible: Flood watch issued by National Weather ServiceNational Weather Service has issued a time sensitive severe alert.\nA flood watch is in effect Tuesday from 5 p.m. to 11 p.m. this evening.\nWHERE: Portions of central, northern, northwest, and western Virginia, including the following areas, in central Virginia, Albemarle, Central Virginia Blue Ridge, Greene, Orange and Spotsylvania.\nIn northwest Virginia, Madison, Northern Virginia Blue Ridge, Page and Rappahannock.\nPRECAUTIONARY/PREPAREDNESS ACTIONS: You should monitor later forecasts and be prepared to take action should Flash Flood Warnings be issued.'}, {'author': 'Bill Atkinson', 'base': 'https://www.progress-index.com', 'provider': None, 'published_date': '2024-07-19T22:00:00+00:00', 'text': 'National Weather Service issues flood watch for Tri-Cities until 10 p.m. Saturday\n\nSaturday\'s hard rain pummeling the Tri-City area has led to a flash-flood watch from the National Weather Service until 10 p.m., with warnings issues for points north and east of here.\n\nNWS\' Wakefield office issued the advisory around 3:40 p.m. for most of central, southern and southeastern Virginia. Slow-moving showers and thunderstorms are producing rainfall around 2-3 inches per hour, the weather service said, and that could cause flooding in low-lying areas due to excessive water runoff.\n\n"Additionally, portions of the area have received a good amount of rain over the past few days, which could exacerbate these flooding conditions," NWS Wakefield said in its advisory.\n\nA flood warning was issued for metro Richmond that was set to expire at 6 p.m. Similar warnings were issued for portions of the Northern Neck and Peninsula areas of Virginia.\n\nIn Petersburg, the rain already has caused flooding along East Wythe Street at McKeever Street near Interstate 95; East Bank and Madison streets near the YMCA building; Bollingbrook Street between North Crater Road and Madison Street; and River and Fifth streets. Petersburg Police issued a warning asking motorists to "use caution when traveling through."\n\nShowers and thunderstorms are expected to last through Saturday evening into the overnight hours Sunday, NWS Wakefield said.\n\nThis is a developing story. Updates will be put on progress-index.com as they become available', 'title': 'National Weather Service issues flood watch for Tri-Cities until 10 p.m. Saturday', 'top_image': 'https://www.gannett-cdn.com/presto/2022/06/27/NPRI/2481938c-8faf-4398-9adb-92356a70bdc2-BankStreetClosure.jpg?auto=webp&crop=959,540,x0,y320&format=pjpg&width=1200', 'url': 'https://www.progress-index.com/story/weather/severe/2024/07/20/flooding-petersburg-flood-watch-saturday-night/74484054007/', 'keywords': ["..."], 'summary': "National Weather Service issues flood watch for Tri-Cities until 10 p.m. SaturdaySaturday's hard rain pummeling the Tri-City area has led to a flash-flood watch from the National Weather Service until 10 p.m., with warnings issues for points north and east of here.\nNWS' Wakefield office issued the advisory around 3:40 p.m. for most of central, southern and southeastern Virginia.\nSlow-moving showers and thunderstorms are producing rainfall around 2-3 inches per hour, the weather service said, and that could cause flooding in low-lying areas due to excessive water runoff.\nA flood warning was issued for metro Richmond that was set to expire at 6 p.m.\nSimilar warnings were issued for portions of the Northern Neck and Peninsula areas of Virginia."}, {'author': '', 'base': 'https://patch.com', 'provider': None, 'published_date': '2024-07-23T23:36:07+00:00', 'text': 'Weather \'Life-Threatening Flash Flooding\' Possible In GA; Warnings Issued "Life-threatening flash flooding" may occur in some parts of Georgia on Tuesday, according to two warnings.\n\nA flash flood warning has been issued for some Georgia cities until 10 p.m. Tuesday. (Shutterstock)\n\nGEORGIA — A flash flood warning has been issued for some Georgia cities until 10 p.m. Tuesday due to possible "life-threatening flash flooding" from storms, according to the National Weather Service.\n\nThe warning was issued for Atlanta, Marietta, Sandy Springs, Smyrna, Vinings and Mableton. The Chattahoochee River, Rottenwood Creek, Sweetwater Creek, Butternut Creek and Nickajack Creek are also included in the warning. "At 729 PM EDT, emergency management reported thunderstorms producing heavy rain across the warned area. Between 2 and 3 inches of rain have fallen. Additional rainfall amounts of 0.5 to 1 inch are possible in the warned area. Flash flooding is already occurring," the NWS wrote in the alert.\n\nThe NWS said between 2 and 3.5 inches of rainfall had poured into other areas in or near metro Atlanta. The expected additional rainfall amounts of 1-2 inches triggered a second flash flood warning for the following areas until 9:45 p.m. Tuesday:\n\nLawrenceville\n\nPeachtree Corners\n\nRoswell\n\nDunwoody\n\nDuluth\n\nSugar Hill\n\nSuwanee\n\nBuford\n\nChamblee\n\nNorcross\n\nDoraville\n\nBraselton\n\nBerkeley Lake\n\nRest Haven\n\nMechanicsville\n\nHog Mountain\n\nChastain Memorial Park The flash flooding of creeks, streams, urban areas, highways, streets and underpasses could potentially be life threatening, the NWS said. "Turn around, don\'t drown when encountering flooded roads. Most flood deaths occur in vehicles. Please report observed flooding to local emergency services or law enforcement and request they pass this information to the National Weather Service when you can do so safely," weather officials said.\n\nAt least 2,000 people were without power around 8 p.m. Tuesday in Gwinnett County, according to the Georgia Power outage map. Around 8:15 p.m., Dunwoody Police reported in a Nixle alert a downed tree on power lines at North Peachtree Road and Sandell Drive. The road was closed at the time.', 'title': "'Life-Threatening Flash Flooding' Possible In GA; Warnings Issued", 'top_image': 'https://patch.com/img/cdn20/users/26200734/20240723/081327/styles/patch_image/public/flood___23201319084.jpg', 'url': 'https://patch.com/georgia/atlanta/flash-flood-warning-issued-some-ga-cities', 'keywords': ["..."], 'summary': 'Weather \'Life-Threatening Flash Flooding\' Possible In GA; Warnings Issued "Life-threatening flash flooding" may occur in some parts of Georgia on Tuesday, according to two warnings.\nA flash flood warning has been issued for some Georgia cities until 10 p.m. Tuesday.\n(Shutterstock)GEORGIA — A flash flood warning has been issued for some Georgia cities until 10 p.m. Tuesday due to possible "life-threatening flash flooding" from storms, according to the National Weather Service.\nFlash flooding is already occurring," the NWS wrote in the alert.\nAt least 2,000 people were without power around 8 p.m. Tuesday in Gwinnett County, according to the Georgia Power outage map.'}, {'author': 'Rocktown Now', 'base': 'https://rocktownnow.com', 'provider': None, 'published_date': '2024-05-06T20:52:18+00:00', 'text': 'HARRISONBURG, Va. ( ROCKTOWN NOW ) – The National Weather Service has issued a flash flood warning for central Rockingham County and Harrisonburg, Virginia until 7:45 p.m.\n\nThe City of Harrisonburg, Town of Dayton, and Dale Enterprise are the among the impacted localities.\n\nAccording to an alert from NWS in Sterling, Va., thunderstorms are producing heavy rainfall of 1-2 inches per hour, with 1-1.5 inches already fallen. Additional rainfall of 1-2 inches is possible. Flash flooding is ongoing or expected soon in small creeks, streams, urban areas, highways, streets, underpasses, and other low-lying areas.\n\nThe National Weather Service urges drivers to “turn around, don’t drown” when encountering flooded roads. Most flood deaths occur in vehicles.', 'title': 'Flash flood warning issued for Harrisonburg and Rockingham County', 'top_image': 'https://rocktownnow.sagacom.com/files/2024/03/Rain-on-a-window.jpg', 'url': 'https://rocktownnow.com/news/218812-flash-flood-warning-issued-for-harrisonburg-and-rockingham-county/', 'keywords': ["..."], 'summary': 'HARRISONBURG, Va. ( ROCKTOWN NOW ) – The National Weather Service has issued a flash flood warning for central Rockingham County and Harrisonburg, Virginia until 7:45 p.m.\nAccording to an alert from NWS in Sterling, Va., thunderstorms are producing heavy rainfall of 1-2 inches per hour, with 1-1.5 inches already fallen.\nAdditional rainfall of 1-2 inches is possible.\nFlash flooding is ongoing or expected soon in small creeks, streams, urban areas, highways, streets, underpasses, and other low-lying areas.\nThe National Weather Service urges drivers to “turn around, don’t drown” when encountering flooded roads.'}, {'author': 'Metronews Staff, Aaron Parker, Mike Nolting', 'base': 'https://wvmetronews.com', 'provider': None, 'published_date': '2024-05-14T22:00:00+00:00', 'text': 'CHARLESTON, W.Va. — A few counties are under a flash flood advisory or flash flood warning for Wednesday night.\n\nThe National Weather Service issued a flash food warning for West Central Fayette County. The warning will remain in effect until 10:15 p.m. Wednesday night.\n\nThunderstorms in the area brought between one and two inches of rain. Up to an inch of additional rain is possible in the warned area. Flash flooding is also ongoing or expected.\n\nA flash flood advisory is out for parts of southeast West Virginia. The advisory remains in effect until 9:45 p.m. Wednesday in Greenbrier and Monroe counties.\n\nThe Summers County Sheriff’s Office also said that the county is experiencing some flash flooding. There are a few flooded streets as reported by Summers County 911 Center that include James Street and parts of 3rd, 4th, and 7th avenues in Hinton.', 'title': 'NWS issues flash flood warnings, advisories for parts of southeastern West Virginia', 'top_image': 'https://wvmetronews.com/wp-content/uploads/2024/05/rlx-6-e1715813915411.png', 'url': 'https://wvmetronews.com/2024/05/15/nws-issues-flash-flood-warnings-advisories-for-parts-of-southeastern-west-virginia/', 'keywords': ["..."], 'summary': 'CHARLESTON, W.Va. — A few counties are under a flash flood advisory or flash flood warning for Wednesday night.\nThe National Weather Service issued a flash food warning for West Central Fayette County.\nFlash flooding is also ongoing or expected.\nA flash flood advisory is out for parts of southeast West Virginia.\nThe Summers County Sheriff’s Office also said that the county is experiencing some flash flooding.'}, {'author': 'Staff Reports, Https, Www.Facebook.Com Eyewitnessnewscharleston', 'base': 'https://wchstv.com', 'provider': None, 'published_date': None, 'text': 'UPDATED - 11 p.m., 4/11/24\n\nThe National Weather Service has issued a statement regarding flooding conditions in West Virginia and Kentucky.\n\nA flood warning remains in effect until 12:30 a.m. Friday as rounds of rain are expected to continue overnight.\n\nThe NWS said excessive rainfall has impacted Boone, Cabell, Lincoln, Logan, Mingo and Wayne counties in West Virginia and Lawrence County in Kentucky.\n\nThe National Weather Service has issued a flood warning for the Coal River at Tornado affecting Lincoln, Boone and Kanawha counties through 3:30 a.m.\n\nSmith Creek Road and Ferrell Road have become impassible and sections of Coal River Road upstream from the Tornado Bridge are flooded.\n\nHigh water conditions near along waterways, roads and urban areas are possible as several inches of rain has hammered the Tri-State.\n\n\n\nEmergency personnel encourage residents to avoid driving along flooded roads, especially at night when dangers of flooding become more difficult to see.\n\nTo submit photos or videos of high water in your area, .\n\nUPDATED - 9:25 p.m., 4/11/24\n\n\n\nThe National Weather Service has expanded a flash flood warning for portions of West Virginia and Ohio.\n\nThe warning covers portions of Jackson, Mason, Putnam and Wood counties in West Virginia along with Athens, Gallia, Meigs, Morgan and Washington counties in Ohio through 1 a.m. Friday.\n\nThe NWS said the flooding of waterways, roads and urban areas are possible.\n\nTo submit footage of high water in your area, .\n\nUPDATED - 6 p.m., 4/11/24\n\n\n\nA flash flood warning has been issued for portions of West Virginia.\n\nThe National Weather Service has issued a warning for parts of Calhoun, Doddridge, Jackson, Mason, Pleasants, Ritchie, Roane, Tyler, Wirt and Wood counties until 11:45 p.m. Thursday.\n\nThe NWS said heavy thunderstorms may produce up to 2 inches of rain which may impact waterways, roads and urban areas.\n\nUPDATED - 4:10 p.m., 4/11/24\n\n\n\nA tornado watch has been issued for the entire Eyewitness News viewing area Thursday.\n\nThe watch, issued by the National Weather Service, is in effect until 9 p.m.\n\nORIGINAL STORY\n\n\n\nA flood watch has been issued in counties along the Ohio River on Thursday.\n\nThe watch, issued by the National Weather Service, includes counties like Cabell, Putnam, Mason and others to the north along the river, as well as most of southern Ohio.\n\nThe flood watch will remain in effect through late Thursday as officials expect the region to continue to be drenched with heavy rain.\n\nThe Eyewitness News StormTeam has issued a Weather Alert for Thursday. to read more about what to expect heading into the evening hours.', 'title': 'NWS issues flood warnings for central West Virginia, northeast Kentucky', 'top_image': 'https://wchstv.com/resources/media/36449e1e-5ace-4b3c-8a9f-a4fe2fcbc55e-large16x9_PLICKINGCOFLOODING.transfer_frame_1635.jpeg', 'url': 'https://wchstv.com/news/local/flood-watch-issued-for-counties-along-the-ohio-river', 'keywords': ["..."], 'summary': 'UPDATED - 11 p.m., 4/11/24The National Weather Service has issued a statement regarding flooding conditions in West Virginia and Kentucky.\nA flood warning remains in effect until 12:30 a.m. Friday as rounds of rain are expected to continue overnight.\nThe NWS said excessive rainfall has impacted Boone, Cabell, Lincoln, Logan, Mingo and Wayne counties in West Virginia and Lawrence County in Kentucky.\nUPDATED - 9:25 p.m., 4/11/24The National Weather Service has expanded a flash flood warning for portions of West Virginia and Ohio.\nUPDATED - 6 p.m., 4/11/24A flash flood warning has been issued for portions of West Virginia.'}]
    
    state["chosen_trend"]["processed_news"] = processed_news_results
    return state


if __name__ == "__main__":
    state = {"chosen_trend": {}}
    state = ask_trend(state)
    state = get_news_for_trend(state)
    print(state)